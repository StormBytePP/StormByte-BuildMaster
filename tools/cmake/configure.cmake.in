message(STATUS "@_CMAKE_INDENT_@Configuring @_CMAKE_COMPONENT_TITLE@")

execute_process(
	COMMAND @ENV_CMAKE_SILENT_COMMAND@ -Wno-dev -S @_CMAKE_SRC_DIR@ -B @_CMAKE_BUILD_DIR@ -G Ninja
		"-DCMAKE_BUILD_TYPE=@CMAKE_BUILD_TYPE@"
		"-DBUILD_SHARED_LIBS=@_CMAKE_SHARED_MODE@"
		"-DCMAKE_INSTALL_PREFIX=@BUILDMASTER_INSTALL_DIR@"
		"-DCMAKE_C_FLAGS=@CMAKE_C_FLAGS@"
		"-DCMAKE_CXX_FLAGS=@CMAKE_CXX_FLAGS@"
		"-DCMAKE_EXE_LINKER_FLAGS=@CMAKE_EXE_LINKER_FLAGS@"
		"-DCMAKE_SHARED_LINKER_FLAGS=@CMAKE_SHARED_LINKER_FLAGS@"
		"-DCMAKE_POSITION_INDEPENDENT_CODE=ON"
		@_CMAKE_OPTIONS@
	WORKING_DIRECTORY "@_CMAKE_BUILD_DIR@"
	RESULT_VARIABLE CMAKE_RESULT
	OUTPUT_VARIABLE CMAKE_OUT
	ERROR_VARIABLE CMAKE_ERROR
)
if(CMAKE_ERROR)
	message(WARNING "${CMAKE_ERROR}")
endif()
if(NOT CMAKE_RESULT EQUAL 0)
	message(FATAL_ERROR "Configuring @_CMAKE_COMPONENT_TITLE@ failed (exit ${CMAKE_RESULT}). See output above for details.")
endif()
